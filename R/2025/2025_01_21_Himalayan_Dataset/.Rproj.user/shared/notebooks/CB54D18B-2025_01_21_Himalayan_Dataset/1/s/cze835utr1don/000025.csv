"0","# Prepare the data for the Sankey diagram"
"0","# sankey_data <- mountaineering_data %>%"
"0","#   mutate("
"0","#     oxygen_usage = ifelse(O2USED, ""Used Oxygen"", ""No Oxygen""),  # Label for oxygen usage"
"0","#     success_status = ifelse(SMTMEMBERS > 0, ""Success"", ""Failure"")  # Label success or failure"
"0","#   ) %>%"
"0","#   group_by(oxygen_usage, success_status) %>%"
"0","#   summarise(count = n(), .groups = ""drop"")  # Count combinations"
"0","# "
"0","# # Create the Sankey diagram"
"0","# ggplot(sankey_data,"
"0","#        aes(axis1 = oxygen_usage, axis2 = success_status, y = count)) +"
"0","#   geom_alluvium(aes(fill = oxygen_usage), width = 1/12) +"
"0","#   geom_stratum(width = 1/6, fill = ""gray70"", color = ""black"") +"
"0","#   geom_text(stat = ""stratum"", aes(label = after_stat(stratum))) +"
"0","#   scale_fill_manual(values = c(""Used Oxygen"" = ""#1f78b4"", ""No Oxygen"" = ""#33a02c"")) +"
"0","#   labs("
"0","#     title = ""Flow of Oxygen Usage to Summit Outcomes"","
"0","#     x = """","
"0","#     y = ""Expedition Count"""
"0","#   ) +"
"0","#   theme_minimal(base_size = 14) +"
"0","#   theme("
"0","#     plot.title = element_text(hjust = 0.5, face = ""bold""),"
"0","#     axis.text.y = element_blank(),"
"0","#     axis.title.y = element_text(face = ""bold""),"
"0","#     panel.grid = element_blank()"
"0","#   )"
"0",""
"0",""
